!function(){function e(e,t){t.aHrefSanitizationWhitelist(/^\s*(https?|l|data):/);var n,r=["$q","$log","$timeout","$injector",function(e,t,r,o){var u=function(t){var n=o.get("UQLAccountService");t.headers.Accept="application/json";var r=n.getToken();return r!==!1&&(t.headers[n.getTokenName()]=r),t||e.when(t)},c=function(t){return e.reject(t)},i=function(t){return n=n||o.get("$http"),t||e.when(t)},a=function(t){return n=n||o.get("$http"),e.reject(t)};return{request:u,requestError:c,response:i,responseError:a}}];e.interceptors.push(r)}e.$inject=["$httpProvider","$compileProvider"],angular.module("uql.app.account",["uql.app.config","ngCookies"]).config(e)}(),function(){"use strict";function e(e,t,n,r){var o=r.apiUrl+"account",u=!1,c=!1,i=null,a=function(){return angular.isDefined(n.get(r.uqlCookieName))?u=n.get(r.uqlCookieName):!1},s=function(){return r.uqlTokenHeader},f=function(){if(g()!==!1)return m().promise;l(),d(t.defer());var n=(new Date).getTime(),r=o+"?"+n;return e.get(r).success(function(e){l(),m().resolve(e)}).error(function(e){l(),m().reject(e)}),m().promise},p=function(n){var r=t.defer();return e({method:"POST",data:n,url:o}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},l=function(){c=!c},g=function(){return c},d=function(e){i=e},m=function(){return i};return{getAccount:f,getToken:a,getTokenName:s,updateAccount:p}}e.$inject=["$http","$q","$cookies","UQL_APP_CONFIG"],angular.module("uql.app.account").factory("UQLAccountService",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVxbGFwcC1hY2NvdW50Lm1pbi5qcyIsInVxbC5hcHAuYWNjb3VudC5qcyIsInVxbC5hcHAuYWNjb3VudC5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbIkNvbmZpZyIsIiRodHRwUHJvdmlkZXIiLCIkY29tcGlsZVByb3ZpZGVyIiwiYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QiLCIkaHR0cCIsImludGVyY2VwdG9yIiwiJHEiLCIkbG9nIiwiJHRpbWVvdXQiLCIkaW5qZWN0b3IiLCJvblJlcXVlc3QiLCJjb25maWciLCJhY2NvdW50U3ZjIiwiZ2V0IiwiaGVhZGVycyIsIkFjY2VwdCIsInRva2VuIiwiZ2V0VG9rZW4iLCJnZXRUb2tlbk5hbWUiLCJ3aGVuIiwib25SZXF1ZXN0RXJyb3IiLCJyZWplY3Rpb24iLCJyZWplY3QiLCJvblJlc3BvbnNlIiwicmVzcG9uc2UiLCJvblJlc3BvbnNlRXJyb3IiLCJyZXF1ZXN0IiwicmVxdWVzdEVycm9yIiwicmVzcG9uc2VFcnJvciIsImludGVyY2VwdG9ycyIsInB1c2giLCIkaW5qZWN0IiwiYW5ndWxhciIsIm1vZHVsZSIsInVxbEFjY291bnRTZXJ2aWNlIiwiJGNvb2tpZXMiLCJVUUxfQVBQX0NPTkZJRyIsImFwaSIsImFwaVVybCIsImlzRGVmZXJyZWQiLCJkZWZlcnJlZCIsImlzRGVmaW5lZCIsInVxbENvb2tpZU5hbWUiLCJ1cWxUb2tlbkhlYWRlciIsImdldEFjY291bnQiLCJnZXRJc0RlZmVycmVkIiwiZ2V0RGVmZXJyZWQiLCJwcm9taXNlIiwidG9nZ2xlSXNEZWZlcnJlZCIsInNldERlZmVycmVkIiwiZGVmZXIiLCJ0aW1lc3RhbXAiLCJEYXRlIiwiZ2V0VGltZSIsInVybCIsInN1Y2Nlc3MiLCJkYXRhIiwicmVzb2x2ZSIsImVycm9yIiwidXBkYXRlQWNjb3VudCIsImFjY291bnQiLCJtZXRob2QiLCJkIiwiZmFjdG9yeSJdLCJtYXBwaW5ncyI6IkNBQUEsV0NLQSxRQUFBQSxHQUFBQyxFQUFBQyxHQUNBQSxFQUFBQywyQkFBQSx1QkFFQSxJQUFBQyxHQUNBQyxHQUFBLEtBQUEsT0FBQSxXQUFBLFlBQ0EsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FFQSxHQUFBQyxHQUFBLFNBQUFDLEdBQ0EsR0FBQUMsR0FBQUgsRUFBQUksSUFBQSxvQkFFQUYsR0FBQUcsUUFBQUMsT0FBQSxrQkFHQSxJQUFBQyxHQUFBSixFQUFBSyxVQUtBLE9BSkFELE1BQUEsSUFDQUwsRUFBQUcsUUFBQUYsRUFBQU0sZ0JBQUFGLEdBR0FMLEdBQUFMLEVBQUFhLEtBQUFSLElBR0FTLEVBQUEsU0FBQUMsR0FDQSxNQUFBZixHQUFBZ0IsT0FBQUQsSUFHQUUsRUFBQSxTQUFBQyxHQUVBLE1BREFwQixHQUFBQSxHQUFBSyxFQUFBSSxJQUFBLFNBQ0FXLEdBQUFsQixFQUFBYSxLQUFBSyxJQUdBQyxFQUFBLFNBQUFKLEdBRUEsTUFEQWpCLEdBQUFBLEdBQUFLLEVBQUFJLElBQUEsU0FDQVAsRUFBQWdCLE9BQUFELEdBR0EsUUFDQUssUUFBQWhCLEVBQ0FpQixhQUFBUCxFQUNBSSxTQUFBRCxFQUNBSyxjQUFBSCxJQUlBeEIsR0FBQTRCLGFBQUFDLEtBQUF6QixHRC9DRUwsRUFBTytCLFNBQVcsZ0JBQWlCLG9CQ0FyQ0MsUUFBQUMsT0FBQSxtQkFBQSxpQkFBQSxjQUNBdEIsT0FBQVgsTUNFQSxXQUNBLFlBTUEsU0FBQWtDLEdBQUE5QixFQUFBRSxFQUFBNkIsRUFBQUMsR0FDQSxHQUFBQyxHQUFBRCxFQUFBRSxPQUFBLFVBQ0F0QixHQUFBLEVBQ0F1QixHQUFBLEVBQ0FDLEVBQUEsS0FNQXZCLEVBQUEsV0FDQSxNQUFBZSxTQUFBUyxVQUFBTixFQUFBdEIsSUFBQXVCLEVBQUFNLGdCQUNBMUIsRUFBQW1CLEVBQUF0QixJQUFBdUIsRUFBQU0sZ0JBR0EsR0FRQXhCLEVBQUEsV0FDQSxNQUFBa0IsR0FBQU8sZ0JBT0FDLEVBQUEsV0FDQSxHQUFBQyxPQUFBLEVBQ0EsTUFBQUMsS0FBQUMsT0FFQUMsS0FDQUMsRUFBQTNDLEVBQUE0QyxRQUNBLElBQUFDLElBQUEsR0FBQUMsT0FBQUMsVUFDQUMsRUFBQWpCLEVBQUEsSUFBQWMsQ0FVQSxPQVRBL0MsR0FBQVMsSUFBQXlDLEdBQ0FDLFFBQUEsU0FBQUMsR0FDQVIsSUFDQUYsSUFBQVcsUUFBQUQsS0FFQUUsTUFBQSxTQUFBQSxHQUNBVixJQUNBRixJQUFBeEIsT0FBQW9DLEtBRUFaLElBQUFDLFNBUUFZLEVBQUEsU0FBQUMsR0FDQSxHQUFBcEIsR0FBQWxDLEVBQUE0QyxPQVlBLE9BWEE5QyxJQUNBeUQsT0FBQSxPQUNBTCxLQUFBSSxFQUNBTixJQUFBakIsSUFFQWtCLFFBQUEsU0FBQUEsR0FDQWYsRUFBQWlCLFFBQUFGLEtBRUFHLE1BQUEsU0FBQUEsR0FDQWxCLEVBQUFsQixPQUFBb0MsS0FFQWxCLEVBQUFPLFNBR0FDLEVBQUEsV0FDQVQsR0FBQUEsR0FHQU0sRUFBQSxXQUNBLE1BQUFOLElBR0FVLEVBQUEsU0FBQWEsR0FDQXRCLEVBQUFzQixHQUdBaEIsRUFBQSxXQUNBLE1BQUFOLEdBSUEsUUFDQUksV0FBQUEsRUFDQTNCLFNBQUFBLEVBQ0FDLGFBQUFBLEVBQ0F5QyxjQUFBQSxHRjdDRXpCLEVBQWtCSCxTQUFXLFFBQVMsS0FBTSxXQUFZLGtCRXBEMURDLFFBQUFDLE9BQUEsbUJBQ0E4QixRQUFBLG9CQUFBN0IiLCJmaWxlIjoidXFsYXBwLWFjY291bnQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xuICBDb25maWcuJGluamVjdCA9IFtcIiRodHRwUHJvdmlkZXJcIiwgXCIkY29tcGlsZVByb3ZpZGVyXCJdO1xuICBhbmd1bGFyLm1vZHVsZSgndXFsLmFwcC5hY2NvdW50JywgWyd1cWwuYXBwLmNvbmZpZycsICduZ0Nvb2tpZXMnXSlcbiAgICAuY29uZmlnKENvbmZpZyk7XG5cbiAgLyoqIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBDb25maWcgKCRodHRwUHJvdmlkZXIsICRjb21waWxlUHJvdmlkZXIpIHtcbiAgICAkY29tcGlsZVByb3ZpZGVyLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0KC9eXFxzKihodHRwcz98bHxkYXRhKTovKTtcblxuICAgIHZhciAkaHR0cCxcbiAgICAgIGludGVyY2VwdG9yID0gWyckcScsICckbG9nJywgJyR0aW1lb3V0JywgJyRpbmplY3RvcicsXG4gICAgICAgIGZ1bmN0aW9uICgkcSwgJGxvZywgJHRpbWVvdXQsICRpbmplY3Rvcikge1xuXG4gICAgICAgICAgdmFyIG9uUmVxdWVzdCA9IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgICAgIHZhciBhY2NvdW50U3ZjID0gJGluamVjdG9yLmdldCgnVVFMQWNjb3VudFNlcnZpY2UnKTtcblxuICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMuQWNjZXB0ID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuXG4gICAgICAgICAgICAvLyBBZGQgYXV0aG9yaXphdGlvbiB0b2tlbiBmb3IgZWFjaCByZXF1ZXN0XG4gICAgICAgICAgICB2YXIgdG9rZW4gPSBhY2NvdW50U3ZjLmdldFRva2VuKCk7XG4gICAgICAgICAgICBpZiAodG9rZW4gIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzW2FjY291bnRTdmMuZ2V0VG9rZW5OYW1lKCldID0gdG9rZW47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBjb25maWcgfHwgJHEud2hlbihjb25maWcpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgb25SZXF1ZXN0RXJyb3IgPSBmdW5jdGlvbiAocmVqZWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlamVjdGlvbik7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBvblJlc3BvbnNlID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAkaHR0cCA9ICRodHRwIHx8ICRpbmplY3Rvci5nZXQoJyRodHRwJyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgJHEud2hlbihyZXNwb25zZSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBvblJlc3BvbnNlRXJyb3IgPSBmdW5jdGlvbiAocmVqZWN0aW9uKSB7XG4gICAgICAgICAgICAkaHR0cCA9ICRodHRwIHx8ICRpbmplY3Rvci5nZXQoJyRodHRwJyk7XG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlamVjdGlvbik7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXF1ZXN0OiBvblJlcXVlc3QsXG4gICAgICAgICAgICByZXF1ZXN0RXJyb3I6IG9uUmVxdWVzdEVycm9yLFxuICAgICAgICAgICAgcmVzcG9uc2U6IG9uUmVzcG9uc2UsXG4gICAgICAgICAgICByZXNwb25zZUVycm9yOiBvblJlc3BvbnNlRXJyb3JcbiAgICAgICAgICB9O1xuICAgICAgICB9XTtcblxuICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goaW50ZXJjZXB0b3IpO1xuICB9XG59KSgpO1xuLyoqXG4gKiBBbGVydCBNYW5hZ2VtZW50IHNlcnZpY2UuIFNob3VsZCBiZSBzZXBhcmF0ZWQgb3V0IGludG8gaXQncyBvd24gZmlsZVxuICovXG5cbihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHVxbEFjY291bnRTZXJ2aWNlLiRpbmplY3QgPSBbXCIkaHR0cFwiLCBcIiRxXCIsIFwiJGNvb2tpZXNcIiwgXCJVUUxfQVBQX0NPTkZJR1wiXTtcbiAgYW5ndWxhci5tb2R1bGUoJ3VxbC5hcHAuYWNjb3VudCcpXG4gICAgLmZhY3RvcnkoJ1VRTEFjY291bnRTZXJ2aWNlJywgdXFsQWNjb3VudFNlcnZpY2UpO1xuXG4gIC8qKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gdXFsQWNjb3VudFNlcnZpY2UoJGh0dHAsICRxLCAkY29va2llcywgVVFMX0FQUF9DT05GSUcpIHtcbiAgICB2YXIgYXBpID0gVVFMX0FQUF9DT05GSUcuYXBpVXJsICsgJ2FjY291bnQnO1xuICAgIHZhciB0b2tlbiA9IGZhbHNlO1xuICAgIHZhciBpc0RlZmVycmVkID0gZmFsc2U7XG4gICAgdmFyIGRlZmVycmVkID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBSZXR1cm5zIHRoZSBjdXJyZW50IHRva2VuIHZhbHVlXG4gICAgICogQHJldHVybnMgeyp9IFRoZSB0b2tlbiB2YWx1ZSwgZWxzZSBmYWxzZSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICovXG4gICAgdmFyIGdldFRva2VuID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKCRjb29raWVzLmdldChVUUxfQVBQX0NPTkZJRy51cWxDb29raWVOYW1lKSkpIHtcbiAgICAgICAgdG9rZW4gPSAkY29va2llcy5nZXQoVVFMX0FQUF9DT05GSUcudXFsQ29va2llTmFtZSk7XG4gICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIFJldHVybnMgdGhlIHRva2VuIG5hbWVcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgdG9rZW4gbmFtZVxuICAgICAqL1xuICAgIHZhciBnZXRUb2tlbk5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gVVFMX0FQUF9DT05GSUcudXFsVG9rZW5IZWFkZXI7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBHZXRzIGFjY291bnQgZGF0YVxuICAgICAqIEByZXR1cm4ge0RlZmVycmVkfSBBIGRlZmVycmVkIHByb21pc2VcbiAgICAgKi9cbiAgICB2YXIgZ2V0QWNjb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChnZXRJc0RlZmVycmVkKCkgIT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBnZXREZWZlcnJlZCgpLnByb21pc2U7XG4gICAgICB9XG4gICAgICB0b2dnbGVJc0RlZmVycmVkKCk7XG4gICAgICBzZXREZWZlcnJlZCgkcS5kZWZlcigpKTtcbiAgICAgIHZhciB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgIHZhciB1cmwgPSBhcGkgKyAnPycgKyB0aW1lc3RhbXA7XG4gICAgICAkaHR0cC5nZXQodXJsKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIHRvZ2dsZUlzRGVmZXJyZWQoKTtcbiAgICAgICAgICBnZXREZWZlcnJlZCgpLnJlc29sdmUoZGF0YSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICB0b2dnbGVJc0RlZmVycmVkKCk7XG4gICAgICAgICAgZ2V0RGVmZXJyZWQoKS5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgIHJldHVybiBnZXREZWZlcnJlZCgpLnByb21pc2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBVcGRhdGVzIGFuIGFjY291bnRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gYWNjb3VudFxuICAgICAqIEByZXR1cm4ge0RlZmVycmVkfSBBIGRlZmVycmVkIHByb21pc2VcbiAgICAgKi9cbiAgICB2YXIgdXBkYXRlQWNjb3VudCA9IGZ1bmN0aW9uIChhY2NvdW50KSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgJGh0dHAoe1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgZGF0YTogYWNjb3VudCxcbiAgICAgICAgdXJsOiBhcGlcbiAgICAgIH0pXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChzdWNjZXNzKSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShzdWNjZXNzKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcblxuICAgIHZhciB0b2dnbGVJc0RlZmVycmVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgaXNEZWZlcnJlZCA9ICFpc0RlZmVycmVkO1xuICAgIH07XG5cbiAgICB2YXIgZ2V0SXNEZWZlcnJlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBpc0RlZmVycmVkO1xuICAgIH07XG5cbiAgICB2YXIgc2V0RGVmZXJyZWQgPSBmdW5jdGlvbiAoZCkge1xuICAgICAgZGVmZXJyZWQgPSBkO1xuICAgIH07XG5cbiAgICB2YXIgZ2V0RGVmZXJyZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZGVmZXJyZWQ7XG4gICAgfTtcblxuICAgIC8vIFB1YmxpYyBBUElcbiAgICByZXR1cm4ge1xuICAgICAgZ2V0QWNjb3VudDogZ2V0QWNjb3VudCxcbiAgICAgIGdldFRva2VuOiBnZXRUb2tlbixcbiAgICAgIGdldFRva2VuTmFtZTogZ2V0VG9rZW5OYW1lLFxuICAgICAgdXBkYXRlQWNjb3VudDogdXBkYXRlQWNjb3VudFxuICAgIH07XG4gIH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gIGFuZ3VsYXIubW9kdWxlKCd1cWwuYXBwLmFjY291bnQnLCBbJ3VxbC5hcHAuY29uZmlnJywgJ25nQ29va2llcyddKVxuICAgIC5jb25maWcoQ29uZmlnKTtcblxuICAvKiogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIENvbmZpZyAoJGh0dHBQcm92aWRlciwgJGNvbXBpbGVQcm92aWRlcikge1xuICAgICRjb21waWxlUHJvdmlkZXIuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QoL15cXHMqKGh0dHBzP3xsfGRhdGEpOi8pO1xuXG4gICAgdmFyICRodHRwLFxuICAgICAgaW50ZXJjZXB0b3IgPSBbJyRxJywgJyRsb2cnLCAnJHRpbWVvdXQnLCAnJGluamVjdG9yJyxcbiAgICAgICAgZnVuY3Rpb24gKCRxLCAkbG9nLCAkdGltZW91dCwgJGluamVjdG9yKSB7XG5cbiAgICAgICAgICB2YXIgb25SZXF1ZXN0ID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICAgICAgdmFyIGFjY291bnRTdmMgPSAkaW5qZWN0b3IuZ2V0KCdVUUxBY2NvdW50U2VydmljZScpO1xuXG4gICAgICAgICAgICBjb25maWcuaGVhZGVycy5BY2NlcHQgPSAnYXBwbGljYXRpb24vanNvbic7XG5cbiAgICAgICAgICAgIC8vIEFkZCBhdXRob3JpemF0aW9uIHRva2VuIGZvciBlYWNoIHJlcXVlc3RcbiAgICAgICAgICAgIHZhciB0b2tlbiA9IGFjY291bnRTdmMuZ2V0VG9rZW4oKTtcbiAgICAgICAgICAgIGlmICh0b2tlbiAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnNbYWNjb3VudFN2Yy5nZXRUb2tlbk5hbWUoKV0gPSB0b2tlbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZyB8fCAkcS53aGVuKGNvbmZpZyk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBvblJlcXVlc3RFcnJvciA9IGZ1bmN0aW9uIChyZWplY3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVqZWN0aW9uKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIG9uUmVzcG9uc2UgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICRodHRwID0gJGh0dHAgfHwgJGluamVjdG9yLmdldCgnJGh0dHAnKTtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSB8fCAkcS53aGVuKHJlc3BvbnNlKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdmFyIG9uUmVzcG9uc2VFcnJvciA9IGZ1bmN0aW9uIChyZWplY3Rpb24pIHtcbiAgICAgICAgICAgICRodHRwID0gJGh0dHAgfHwgJGluamVjdG9yLmdldCgnJGh0dHAnKTtcbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVqZWN0aW9uKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlcXVlc3Q6IG9uUmVxdWVzdCxcbiAgICAgICAgICAgIHJlcXVlc3RFcnJvcjogb25SZXF1ZXN0RXJyb3IsXG4gICAgICAgICAgICByZXNwb25zZTogb25SZXNwb25zZSxcbiAgICAgICAgICAgIHJlc3BvbnNlRXJyb3I6IG9uUmVzcG9uc2VFcnJvclxuICAgICAgICAgIH07XG4gICAgICAgIH1dO1xuXG4gICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaChpbnRlcmNlcHRvcik7XG4gIH1cbn0pKCk7IiwiLyoqXG4gKiBBbGVydCBNYW5hZ2VtZW50IHNlcnZpY2UuIFNob3VsZCBiZSBzZXBhcmF0ZWQgb3V0IGludG8gaXQncyBvd24gZmlsZVxuICovXG5cbihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXIubW9kdWxlKCd1cWwuYXBwLmFjY291bnQnKVxuICAgIC5mYWN0b3J5KCdVUUxBY2NvdW50U2VydmljZScsIHVxbEFjY291bnRTZXJ2aWNlKTtcblxuICAvKiogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIHVxbEFjY291bnRTZXJ2aWNlKCRodHRwLCAkcSwgJGNvb2tpZXMsIFVRTF9BUFBfQ09ORklHKSB7XG4gICAgdmFyIGFwaSA9IFVRTF9BUFBfQ09ORklHLmFwaVVybCArICdhY2NvdW50JztcbiAgICB2YXIgdG9rZW4gPSBmYWxzZTtcbiAgICB2YXIgaXNEZWZlcnJlZCA9IGZhbHNlO1xuICAgIHZhciBkZWZlcnJlZCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gUmV0dXJucyB0aGUgY3VycmVudCB0b2tlbiB2YWx1ZVxuICAgICAqIEByZXR1cm5zIHsqfSBUaGUgdG9rZW4gdmFsdWUsIGVsc2UgZmFsc2UgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgICAqL1xuICAgIHZhciBnZXRUb2tlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCgkY29va2llcy5nZXQoVVFMX0FQUF9DT05GSUcudXFsQ29va2llTmFtZSkpKSB7XG4gICAgICAgIHRva2VuID0gJGNvb2tpZXMuZ2V0KFVRTF9BUFBfQ09ORklHLnVxbENvb2tpZU5hbWUpO1xuICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBSZXR1cm5zIHRoZSB0b2tlbiBuYW1lXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIHRva2VuIG5hbWVcbiAgICAgKi9cbiAgICB2YXIgZ2V0VG9rZW5OYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIFVRTF9BUFBfQ09ORklHLnVxbFRva2VuSGVhZGVyO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gR2V0cyBhY2NvdW50IGRhdGFcbiAgICAgKiBAcmV0dXJuIHtEZWZlcnJlZH0gQSBkZWZlcnJlZCBwcm9taXNlXG4gICAgICovXG4gICAgdmFyIGdldEFjY291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoZ2V0SXNEZWZlcnJlZCgpICE9PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gZ2V0RGVmZXJyZWQoKS5wcm9taXNlO1xuICAgICAgfVxuICAgICAgdG9nZ2xlSXNEZWZlcnJlZCgpO1xuICAgICAgc2V0RGVmZXJyZWQoJHEuZGVmZXIoKSk7XG4gICAgICB2YXIgdGltZXN0YW1wID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICB2YXIgdXJsID0gYXBpICsgJz8nICsgdGltZXN0YW1wO1xuICAgICAgJGh0dHAuZ2V0KHVybClcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICB0b2dnbGVJc0RlZmVycmVkKCk7XG4gICAgICAgICAgZ2V0RGVmZXJyZWQoKS5yZXNvbHZlKGRhdGEpO1xuICAgICAgICB9KVxuICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgdG9nZ2xlSXNEZWZlcnJlZCgpO1xuICAgICAgICAgIGdldERlZmVycmVkKCkucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICByZXR1cm4gZ2V0RGVmZXJyZWQoKS5wcm9taXNlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gVXBkYXRlcyBhbiBhY2NvdW50XG4gICAgICogQHBhcmFtIHtPYmplY3R9IGFjY291bnRcbiAgICAgKiBAcmV0dXJuIHtEZWZlcnJlZH0gQSBkZWZlcnJlZCBwcm9taXNlXG4gICAgICovXG4gICAgdmFyIHVwZGF0ZUFjY291bnQgPSBmdW5jdGlvbiAoYWNjb3VudCkge1xuICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICRodHRwKHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGRhdGE6IGFjY291bnQsXG4gICAgICAgIHVybDogYXBpXG4gICAgICB9KVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoc3VjY2Vzcykge1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoc3VjY2Vzcyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH07XG5cbiAgICB2YXIgdG9nZ2xlSXNEZWZlcnJlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlzRGVmZXJyZWQgPSAhaXNEZWZlcnJlZDtcbiAgICB9O1xuXG4gICAgdmFyIGdldElzRGVmZXJyZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gaXNEZWZlcnJlZDtcbiAgICB9O1xuXG4gICAgdmFyIHNldERlZmVycmVkID0gZnVuY3Rpb24gKGQpIHtcbiAgICAgIGRlZmVycmVkID0gZDtcbiAgICB9O1xuXG4gICAgdmFyIGdldERlZmVycmVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGRlZmVycmVkO1xuICAgIH07XG5cbiAgICAvLyBQdWJsaWMgQVBJXG4gICAgcmV0dXJuIHtcbiAgICAgIGdldEFjY291bnQ6IGdldEFjY291bnQsXG4gICAgICBnZXRUb2tlbjogZ2V0VG9rZW4sXG4gICAgICBnZXRUb2tlbk5hbWU6IGdldFRva2VuTmFtZSxcbiAgICAgIHVwZGF0ZUFjY291bnQ6IHVwZGF0ZUFjY291bnRcbiAgICB9O1xuICB9XG5cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
